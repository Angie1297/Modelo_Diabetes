<!DOCTYPE html>
<html>
<head>
    <title>Predicción de Diabetes</title>
    <link rel="stylesheet" type="text/css" href="/static/styles.css">
</head>
<body>
    <h1 class="titulo-principal">Predicción de Diabetes</h1>
    <form id="diabetes-form" action="/predict" method="post">
        <div class="containerlabel"></div>
            <label for="pregnancies">Embarazos:</label><br>
            <input type="number" id="pregnancies" name="pregnancies" required><br>
            <label for="plasma_glucose">Glucosa en Plasma:</label><br>
            <input type="number" id="plasma_glucose" name="plasma_glucose" required><br>
            <label for="diastolic_blood_pressure">Presión Arterial Diastólica:</label><br>
            <input type="number" id="diastolic_blood_pressure" name="diastolic_blood_pressure" required><br>
            <label for="triceps_thickness">Espesor de Tríceps (mm):</label><br>
            <input type="number" id="triceps_thickness" name="triceps_thickness" required><br>
            <label for="serum_insulin">Insulina (mu U/ml):</label><br>
            <input type="number" id="serum_insulin" name="serum_insulin" required><br>
            <label for="bmi">Índice de Masa Corporal (BMI):</label><br>
            <input type="number" id="bmi" name="bmi" required><br>
            <label for="diabetes_pedigree">Pedigrí Diabetico:</label><br>
            <input type="number" id="diabetes_pedigree" name="diabetes_pedigree" required><br>
            <label for="age">Edad:</label><br>
            <input type="number" id="age" name="age" step="1" required><br><br>
        </div>
        <input type="submit" value="Enviar">
        <input type="reset" value="Limpiar campos" onclick="clearPredictionResult()">
        <div class="prediction-resultado" id="prediction_result"></div>
        
        <script>
        //Script toma los valores del formulario HTML y  los convierte enformato JSON.
        const form = document.getElementById('diabetes-form');
        form.addEventListener('submit', async (e) => {
            e.preventDefault();
            // Objeto formData con los valores de los campos del formulario
            const formData = {
                pregnancies: parseFloat(document.getElementById('pregnancies').value),
                plasma_glucose: parseFloat(document.getElementById('plasma_glucose').value),
                diastolic_blood_pressure: parseFloat(document.getElementById('diastolic_blood_pressure').value),
                triceps_thickness: parseFloat(document.getElementById('triceps_thickness').value),
                serum_insulin: parseFloat(document.getElementById('serum_insulin').value),
                bmi: parseFloat(document.getElementById('bmi').value),
                diabetes_pedigree: parseFloat(document.getElementById('diabetes_pedigree').value),
                age: parseFloat(document.getElementById('age').value)
            };
            // Envía una solicitud POST al servidor
            const response = await fetch('/predict', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(formData)
            });
            // Muestra el resultado en base a los datos del formulario
            const result = await response.text();
            document.getElementById('prediction_result').innerHTML = result;
        });
        function clearPredictionResult() {
            document.getElementById('prediction_result').innerHTML = '';
        }
        
    </script>
</body>
</html>
